@startuml

package "RedditBusinessLayer" {

    class "PostService" {
        +IPostRepository _postRepository
        +List<Post> GetPosts()
        +Post GetPostById(int postId)
        +void CreatePost(Post post)
        +void UpdatePost(Post post)
        +void DeletePost(Post post)
        +List<Post> GetPostsBySubredditId(int subredditId)
        +List<Post> GetPostsWithSubredditAndUser()
    }

    class "SubredditService" {
        +ISubredditRepository _subredditRepository
        +List<Subreddit> GetSubreddits()
        +Subreddit GetSubredditById(int subredditId)
        +void UpdateSubreddit(Subreddit subreddit)
    }

    class "UserService" {
        +IUserRepository _userRepository
        +List<User> GetUsers()
        +User GetUserById(int userId)
        +void UpdateUser(User user)
    }

    interface "IPostRepository" {
        +List<Post> GetPosts()
        +Post GetPostById(int postId)
        +void CreatePost(Post post)
        +void UpdatePost(Post post)
        +void DeletePost(Post post)
        +List<Post> GetPostsBySubredditId(int subredditId)
        +List<Post> GetPostsWithSubredditAndUser()
    }

    interface "ISubredditRepository" {
        +List<Subreddit> GetSubreddits()
        +Subreddit GetSubredditById(int subredditId)
        +void UpdateSubreddit(Subreddit subreddit)
    }

    interface "IUserRepository" {
        +List<User> GetUsers()
        +User GetUserById(int userId)
        +void UpdateUser(User user)
    }

    class "Post" {
        -int Id
        -string Title
        -string Content
        -DateTime DateCreated
        -int UserId
        -int SubredditId
        +Post(int id, string title, string content, DateTime dateCreated, int userId, int subredditId)
        +void UpdateTitle(string title)
        +void UpdateContent(string content)
    }

    class "Subreddit" {
        -int Id
        -string Name
        -string Description
        +Subreddit(int id, string name, string description)
        +void UpdateName(string name)
        +void UpdateDescription(string description)
    }

    class "User" {
      -int Id
      -string Username
      -string Password
      -string Email
      +User(int id, string username, string password, string email)
      +void UpdateUsername(string username)
      +void UpdatePassword(string password)
      +void UpdateEmail(string email)
  }

  "Post" "0..*" -- "1" "User" : posted by
  "Post" "0..*" -- "1" "Subreddit" : belongs to
  PostService ..> IPostRepository : uses
  SubredditService ..> ISubredditRepository : uses
  UserService ..> IUserRepository : uses

}

@enduml
